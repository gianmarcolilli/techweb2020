<app-header [my-title]="'Configura'"> </app-header>
<mat-card *ngIf="storia">
  <mat-card-header>
    {{ storia.nome }}
  </mat-card-header>
  <mat-card-content>
    <img [src]="storia.urlBackground" [alt]="'  immagine sfondo di  ' + storia.nome" />
    <p *ngFor="let act of storia.steps">
      Attivita n. {{act.activityId + act.activityTitle}} <b>Tipologia : </b>({{ act.action}})   <button> edit </button>
    </p>
    <p *ngIf="(!storia.steps) || (storia.steps.length == 0)">
      Nessuna attività presente
    </p>
    <button (click)="showConfiguraDomanda=true"> Inserisci attività di domande </button>
    <button (click)="showConfiguraClickToObject=true"> Inserisci attività di clicca su immagine </button>

  </mat-card-content>

</mat-card>

<!-- <mat-card>
  <form [formGroup]="form" class="example-form">
    <mat-grid-list cols="2" rowHeight="2:1">

      <mat-grid-tile>
        <mat-form-field class="example-full-width">
          <mat-label>Tipologia Attività</mat-label>
          <mat-select matNativeControl [(value)]="tipologiaAttivita" required>
            <mat-option value="informazione">Testo a caso Informativo</mat-option>
            <mat-option value="domanda">Domanda</mat-option>
            <mat-option value="quiz">Quiz</mat-option>
          </mat-select>
          <mat-error *ngIf="form.get('tipologiaAttivita').invalid">Per favore inserisci tipologia</mat-error>
        </mat-form-field>

        <mat-form-field *ngIf="tipologiaAttivita=='quiz'" class="example-full-width">
          <mat-label>Numero Risposte</mat-label>
          <mat-select matNativeControl (selectionChange)="aggiornaArrayRisposte()" [(value)]="numeroRisposte">
            <mat-option value="2">2</mat-option>
            <mat-option value="3">3</mat-option>
            <mat-option value="4">4</mat-option>
          </mat-select>

          <mat-error *ngIf="form.get('numeroRisposte').invalid">Perfavore so pazzo inserisci un nu numero</mat-error>
        </mat-form-field><br>
        <mat-form-field class="example-full-width">
          <mat-label>Nome immagine</mat-label>
          <input matInput
            placeholder="Inserisci qui il nome dell'immagine">
        </mat-form-field><br>
        <div>
          <button mat-stroked-button type="button" (click)="filePicker.click()">Pick Image</button>
          <input type="file" #filePicker (change)="onImagePicked($event)">
        </div>
        <div class="image-preview" *ngIf="imagePreview!=='' && imagePreview && form.get('image').valid">
          <img [src]="imagePreview" [alt]="form.value.title">
        </div>
      </mat-grid-tile>

      <mat-grid-tile>
        <mat-form-field *ngIf="tipologiaAttivita!=''" class="example-full-width">
          <mat-label>Contenuto</mat-label>
          <input matInput
            [placeholder]="'Inserisci qui '+ (tipologiaAttivita=='informazione'?' il contenuto':' la domanda')">
        </mat-form-field><br>

        <mat-form-field *ngIf="tipologiaAttivita=='domanda'" class="example-full-width">
          <mat-label>Risposta</mat-label>
          <input matInput
            placeholder="Inserisci qui la risposta corretta">
        </mat-form-field><br>
      </mat-grid-tile>

      <mat-grid-tile>
        <div *ngIf="tipologiaAttivita=='quiz'">
          <mat-radio-group aria-label="Select an option">
            <div *ngFor="let item of arrayRisposte; index as i">
              <mat-label>Inserisci la risposta {{i+1}} </mat-label>
              <input>
              <mat-radio-button [value]="i+1">True</mat-radio-button>
            </div>
          </mat-radio-group>
        </div>
      </mat-grid-tile>
    </mat-grid-list>
    <button mat-raised-button color="primary" type="submit">Save Post
    </button>
  </form>
</mat-card>
 -->

<mat-card>


  <form [formGroup]="form" class="example-form">
    <mat-form-field class="example-full-width">
      <mat-label>Tipologia Attività</mat-label>
      <mat-select matNativeControl [(value)]="tipologiaAttivita" required>
        <mat-option value="informazione">Testo a caso Informativo</mat-option>
        <mat-option value="domanda">Domanda</mat-option>
        <mat-option value="quiz">Quiz</mat-option>
      </mat-select>
      <mat-error *ngIf="form.get('tipologiaAttivita').invalid">Per favore inserisci tipologia</mat-error>
    </mat-form-field>

    <mat-form-field *ngIf="tipologiaAttivita=='quiz'" class="example-full-width">
      <mat-label>Numero Risposte</mat-label>
      <mat-select matNativeControl (selectionChange)="aggiornaArrayRisposte()" [(value)]="numeroRisposte">
        <mat-option value="2">2</mat-option>
        <mat-option value="3">3</mat-option>
        <mat-option value="4">4</mat-option>
      </mat-select>

      <mat-error *ngIf="form.get('numeroRisposte').invalid">Perfavore so pazzo inserisci un nu numero</mat-error>
    </mat-form-field>



    <mat-form-field *ngIf="tipologiaAttivita!=''" class="example-full-width">
      <mat-label>Contenuto</mat-label>
      <input matInput  type="text" formControlName="tempDomanda" [(ngModel)]="tempDomanda"
        [placeholder]="'Inserisci qui '+ (tipologiaAttivita=='informazione'?' il contenuto':' la domanda')">
    </mat-form-field>

    <mat-form-field *ngIf="tipologiaAttivita=='domanda'" class="example-full-width">
      <mat-label>Risposta</mat-label>
      <input matInput formControlName="tempRisposta" [(ngModel)]="tempRisposta"
        placeholder="Inserisci qui la risposta corretta">
    </mat-form-field>

    <div *ngIf="tipologiaAttivita=='quiz'">
      <mat-radio-group aria-label="Select an option">
        <div *ngFor="let item of arrayRisposte; index as i">
          <mat-label>Inserisci la risposta {{i+1}} </mat-label>
          <input>
          <mat-radio-button [value]="i+1">True</mat-radio-button>
        </div>
      </mat-radio-group>
    </div>
    <mat-form-field class="example-full-width">
      <mat-label>Nome immagine</mat-label>
      <input matInput
        placeholder="Inserisci qui il nome dell'immagine">
    </mat-form-field>
    <mat-form-field class="example-full-width">
      <mat-label>Alt immagine</mat-label>
      <input matInput
        placeholder="Inserisci qui il testo alternativo per il'immagine">
    </mat-form-field>
    <div>
      <button mat-stroked-button type="button" (click)="filePicker.click()">Pick Image</button>
      <input type="file" #filePicker (change)="onImagePicked($event)">
    </div>
    <div class="image-preview" *ngIf="imagePreview!=='' && imagePreview && form.get('image').valid">
      <img [src]="imagePreview" [alt]="form.value.title">
    </div>

    <button mat-raised-button color="primary" (click)="aggiungiAttivita(tipologiaAttivita)">Aggiungi Attività
    </button>

  </form>



</mat-card>

<!-- <app-puzzle></app-puzzle> -->

<!-- <div *ngIf="showConfiguraDomanda">

  <input [(ngModel)]="tempDomanda" class="form-control" type="text" placeholder=" Inserisci la tua domanda " >

  <button (click)="aggiungiAttivita('domande')" > aggiungi attivita di domande </button>

</div>

<div *ngIf="showConfiguraClickToObject">

  <input [(ngModel)]="tempClickToObject" class="form-control" type="text" placeholder=" scegli opzione " >

  <button (click)="aggiungiAttivita('clickToObject')" > aggiungi attivita di clicca su immagine </button>

</div>


<p *ngIf="storia">

  {{ storia.steps | json}}
</p> -->

